<html>
	<body>
		<input type="text" id="userInput" />
		<input type="button" value="Calculate" id="calculate" />
		<div id="result"></div>
	
		<script>
			function parseCalculationString(s) {
				// --- Parse a calculation string into an array of numbers and operators
				var calculation = [],
				current = '';
				for (var i = 0, ch; ch = s.charAt(i); i++) {
					if ('^*/+-'.indexOf(ch) > -1) {
						if (current == '' && ch == '-') {
							current = '-';
						} else {
							calculation.push(parseFloat(current), ch);
							current = '';
						}
					} else {
						current += s.charAt(i);
					}
				}
				if (current != '') {
					calculation.push(parseFloat(current));
				}
				return calculation;
			}

			function calculate(calc) {
				// --- Perform a calculation expressed as an array of operators and numbers
				var ops = ['^', '*', '/', '+', '-'],
				opFunctions = [
					function(a, b) {
						return Math.pow(a, b);
					},	
					function(a, b) {
						return a * b
					},
					function(a, b) {
						return a / b
					},
					function(a, b) {
						return a + b
					},
					function(a, b) {
						return a - b
					}
				],
				newCalc = [],
				currentOp;
				for (var i = 0; i < ops.length; i++) {
					for (var j = 0; j < calc.length; j++) {
						if (calc[j] == ops[i]) {
							currentOp = opFunctions[i];
						} else if (currentOp) {
							newCalc[newCalc.length - 1] = currentOp(newCalc[newCalc.length - 1], calc[j]);
							currentOp = null;
						} else {
							newCalc.push(calc[j]);
						}
					}
					calc = newCalc;
					newCalc = [];
				}
				if (calc.length > 1) {
					console.log('Error: unable to resolve calculation');
					return calc;
				} else {
					return calc[0];
				}
			}				
			var calculateButton = document.getElementById('calculate'),
			userInput = document.getElementById('userInput'),
			result = document.getElementById('result');
			calculateButton.addEventListener('click', function() {
				result.innerHTML = "The answer is " + calculate(parseCalculationString(userInput.value));
			});
		</script>
	</body>
</html>	